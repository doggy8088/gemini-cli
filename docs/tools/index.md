# 工具

Gemini CLI 包含內建工具，供 Gemini 模型用來與您的本機環境互動、存取資訊和執行動作。這些工具增強了 CLI 的功能，使其能夠超越文字生成並協助執行各種任務。

## Gemini CLI 工具總覽

在 Gemini CLI 的情境中，工具是 Gemini 模型可以請求執行的特定函數或模組。例如，如果您要求 Gemini「摘要 `my_document.txt` 的內容」，模型很可能會識別出需要讀取該檔案，並請求執行 `read_file` 工具。

核心元件 (`packages/core`) 管理這些工具，將其定義（結構描述）呈現給 Gemini 模型，在請求時執行它們，並將結果回傳給模型，以進一步處理為面向使用者的回應。

這些工具提供以下功能：

- **存取本機資訊**：工具允許 Gemini 存取您的本機檔案系統、讀取檔案內容、列出目錄等。
- **執行指令**：透過 `run_shell_command` 等工具，Gemini 可以執行 Shell 指令（具有適當的安全措施和使用者確認）。
- **與網路互動**：工具可以從 URL 擷取內容。
- **執行動作**：工具可以修改檔案、寫入新檔案，或在您的系統上執行其他動作（同樣，通常具有安全保護措施）。
- **基礎回應**：透過使用工具擷取即時或特定本機資料，Gemini 的回應可以更準確、相關，並建立在您的實際情境上。

## 如何使用 Gemini CLI 工具

要使用 Gemini CLI 工具，請向 Gemini CLI 提供提示。流程如下：

1.  您向 Gemini CLI 提供提示。
2.  CLI 將提示傳送到核心。
3.  核心連同您的提示和對話歷史記錄，將可用工具清單及其描述/結構描述傳送到 Gemini API。
4.  Gemini 模型分析您的請求。如果它判斷需要工具，其回應將包含執行具有特定參數的特定工具的請求。
5.  核心接收此工具請求，驗證它，並（通常在敏感操作的使用者確認後）執行工具。
6.  工具的輸出被送回 Gemini 模型。
7.  Gemini 模型使用工具的輸出來制定其最終答案，然後透過核心送回 CLI 並顯示給您。

您通常會在 CLI 中看到指示工具正在被呼叫以及是否成功或失敗的訊息。

## 安全性和確認

許多工具，特別是那些可以修改您的檔案系統或執行指令的工具（`write_file`、`edit`、`run_shell_command`），都是以安全為考量設計的。Gemini CLI 通常會：

- **需要確認：** 在執行潛在敏感操作前提示您，向您顯示即將執行的操作。
- **利用沙箱化：** 所有工具都受到沙箱化強制執行的限制（請參閱 [Gemini CLI 中的沙箱化](../sandbox.md)）。這意味著在沙箱中操作時，您希望使用的任何工具（包括 MCP 伺服器）都必須在沙箱環境_內_可用。例如，要透過 `npx` 執行 MCP 伺服器，`npx` 執行檔必須安裝在沙箱的 Docker 影像內或在 `sandbox-exec` 環境中可用。

在允許工具繼續執行前，仔細檢查確認提示很重要。

## 了解更多關於 Gemini CLI 的工具

Gemini CLI 的內建工具大致可以分類如下：

- **[檔案系統工具](./file-system.md)：** 用於與檔案和目錄互動（讀取、寫入、列表、搜尋等）。
- **[Shell 工具](./shell.md)（`run_shell_command`）：** 用於執行 Shell 指令。
- **[網頁擷取工具](./web-fetch.md)（`web_fetch`）：** 用於從 URL 擷取內容。
- **[網頁搜尋工具](./web-search.md)（`web_search`）：** 用於搜尋網頁。
- **[多檔案讀取工具](./multi-file.md)（`read_many_files`）：** 用於從多個檔案或目錄讀取內容的專用工具，通常由 `@` 指令使用。
- **[記憶體工具](./memory.md)（`save_memory`）：** 用於跨工作階段儲存和召回資訊。

此外，這些工具還包含：

- **[MCP 伺服器](./mcp-server.md)**：MCP 伺服器充當 Gemini 模型與您的本機環境或其他服務（如 API）之間的橋樑。
- **[沙箱化](../sandbox.md)**：沙箱化將模型及其變更與您的環境隔離，以降低潛在風險。
