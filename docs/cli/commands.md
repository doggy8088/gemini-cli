# CLI 指令

Gemini CLI 支援多個內建指令，幫助您管理工作階段、自訂介面以及控制其行為。這些指令以正斜線 (`/`)、@ 符號 (`@`) 或驚嘆號 (`!`) 為前綴。

## 斜線指令 (`/`)

斜線指令提供對 CLI 本身的 meta 層級控制。

- **`/bug`**
  - **說明：** 回報有關 Gemini CLI 的問題。預設情況下，問題會在 Gemini CLI 的 GitHub 存放庫中建檔。您在 `/bug` 後輸入的字串將成為所回報錯誤的標題。可以使用 `.gemini/settings.json` 檔案中的 `bugCommand` 設定來修改預設的 `/bug` 行為。

- **`/chat`**
  - **說明：** 儲存和恢復對話記錄，以便以互動方式進行分支對話狀態，或從之後的工作階段恢復先前的狀態。
  - **子指令：**
    - **`save`**
      - **說明：** 儲存目前的對話記錄。您必須新增一個 `<tag>` 來識別對話狀態。
      - **用法：** `/chat save <tag>`
    - **`resume`**
      - **說明：** 從先前的儲存點恢復對話。
      - **用法：** `/chat resume <tag>`
    - **`list`**
      - **說明：** 列出可用於恢復聊天狀態的標籤。

- **`/clear`**
  - **說明：** 清除終端機畫面，包括 CLI 中可見的工作階段記錄和捲動歷史。底層的工作階段資料（用於歷史記錄回呼）可能會根據具體的實作而保留，但視覺顯示會被清除。
  - **鍵盤快速鍵：** 隨時按 **Ctrl+L** 執行清除操作。

- **`/compress`**
  - **說明：** 將整個聊天情境替換為摘要。這樣可以在保留已發生事件的高層級摘要的同時，節省未來任務所使用的權杖。

- **`/editor`**
  - **說明：** 開啟一個對話方塊，用於選擇支援的編輯器。

- **`/help`** (或 **`/?`**)
  - **說明：** 顯示有關 Gemini CLI 的說明資訊，包括可用指令及其用法。

- **`/mcp`**
  - **說明：** 列出已設定的「模型情境協定」(MCP) 伺र्वર、其連線狀態、伺服器詳細資料和可用工具。
  - **子指令：**
    - **`desc`** 或 **`descriptions`**：
      - **說明：** 顯示 MCP 伺服器和工具的詳細說明。
    - **`nodesc`** 或 **`nodescriptions`**：
      - **說明：** 隱藏工具說明，僅顯示工具名稱。
    - **`schema`**：
      - **說明：** 顯示工具設定參數的完整 JSON 結構描述。
  - **鍵盤快速鍵：** 隨時按 **Ctrl+T** 切換顯示和隱藏工具說明。

- **`/memory`**
  - **說明：** 管理 AI 的指令情境（從 `GEMINI.md` 檔案載入的階層式記憶���）。
  - **子指令：**
    - **`add`**：
      - **說明：** 將後續文字新增至 AI 的記憶體中。用法：`/memory add <要記住的文字>`
    - **`show`**：
      - **說明：** 顯示從所有 `GEMINI.md` 檔案載入的目前階層式記憶體的完整串連內容。這可讓您檢查提供給 Gemini 模型的指令情境。
    - **`refresh`**：
      - **說明：** 從設定位置（全域、專案/上層目錄和子目錄）中找到的所有 `GEMINI.md` 檔案重新載入階層式指令記憶體。此指令會使用最新的 `GEMINI.md` 內容更新模型。
    - **注意：** 有關 `GEMINI.md` 檔案如何構成階層式記憶體的更多詳細資訊，請參閱 [CLI 設定文件](./configuration.md#4-geminimd-files-hierarchical-instructional-context)。

- **`/restore`**
  - **說明：** 將專案檔案還原到執行工具之前的狀態。這對於復原工具所做的檔案編輯特別有用。如果執行時沒有工具呼叫 ID，它將列出可供還原的檢查點。
  - **用法：** `/restore [tool_call_id]`
  - **注意：** 僅當使用 `--checkpointing` 選項叫用 CLI 或透過[設定](./configuration.md)進行設定時才可用。有關更多詳細資訊，請參閱[檢查點文件](../checkpointing.md)。

- **`/stats`**
  - **說明：** 顯示目前 Gemini CLI 工作階段的詳細統計資料，包括權杖用量、快取的權杖節省量（如果可用）和工作階段持續時間。注意：快取的權杖資訊僅在使用快取權杖時顯示，這種情況發生在使用 API 金鑰驗證時，但目前不適用於 OAuth 驗證。

- [**`/theme`**](./themes.md)
  - **說明：** 開啟一個對話方塊，讓您變更 Gemini CLI 的視覺主題。

- **`/auth`**
  - **說明：** 開啟一個對話方塊，讓您變更驗證方法。

- **`/about`**
  - **說明：** 顯示版本資訊。回報問題時請分享此資訊。

- [**`/tools`**](../tools/index.md)
  - **說明：** 顯示 Gemini CLI 中目前可用的工具清單。
  - **子指令：**
    - **`desc`** 或 **`descriptions`**：
      - **說明：** 顯示每個工具的詳細說明，包括每個工具的名稱及其提供給模型的完整說明。
    - **`nodesc`** 或 **`nodescriptions`**：
      - **說明：** 隱藏工具說明，僅顯示工具名稱。

- **`/quit`** (或 **`/exit`**)
  - **說明：** 結束 Gemini CLI。

## @ 指令 (`@`)

@ 指令用於將檔案或目錄的內容包含在您給 Gemini 的提示中。這些指令包含 git 感知篩選功能。

- **`@<檔案或目錄的路徑>`**
  - **說明：** 將指定檔案或檔案的內容注入您目前的提示中。這對於詢問有關特定��式碼、文字或檔案集合的問題很有用。
  - **範例：**
    - `@path/to/your/file.txt 請解釋這段文字。`
    - `@src/my_project/ 請摘要此目錄中的程式碼。`
    - `這個檔案是關於什麼的？ @README.md`
  - **詳細資料：**
    - 如果提供單一檔案的路徑，則會讀取該檔案的內容。
    - 如果提供目錄的路徑，指令會嘗試讀取該目錄及其任何子目錄中檔案的內容。
    - 路徑中的空格應使用反斜線逸出（例如，`@My\ Documents/file.txt`）。
    - 該指令在內部使用 `read_many_files` 工具。內容會先被擷取，然後插入您的查詢中，再傳送給 Gemini 模型。
    - **Git 感知篩選：** 預設情況下，會排除 git 忽略的檔案（例如 `node_modules/`、`dist/`、`.env`、`.git/`）。可以透過 `fileFiltering` 設定來變更此行為。
    - **檔案類型：** 該指令適用於以文字為基礎的檔案。雖然它可能會嘗試讀取任何檔案，但二進位檔案或非常大的檔案可能會被底層的 `read_many_files` 工具略過或截斷，以確保效能和相關性。該工具會指出是否有檔案被略過。
  - **輸出：** CLI 將顯示一則工具呼叫訊息，指出已使用 `read_many_files`，並附上一則詳述狀態和已處理路徑的訊息。

- **`@` (單獨的 @ 符號)**
  - **說明：** 如果您只輸入一個 `@` 符號而沒有路徑，查詢將按原樣傳遞給 Gemini 模型。如果您在提示中專門討論 `@` 符號，這可能很有用。

### `@` 指令的錯誤處理

- 如果在 `@` 後指定的路徑找不到或無效，將會顯示錯誤訊息，並且查詢可能不會傳送給 Gemini 模型，或者會在沒有檔案內容的情況下傳送。
- 如果 `read_many_files` 工具遇到錯誤（例如，權限問題），也會回報此錯誤。

## Shell 模式和傳遞指令 (`!`)

`!` 前綴可讓您直接從 Gemini CLI 內部與系統的 shell 互動。

- **`!<shell_command>`**
  - **說明：** 在系統的預設 shell 中執行給定的 `<shell_command>`。指令的任何輸出或錯誤都會顯示在終端機中。
  - **範例：**
    - `!ls -la` (執行 `ls -la` 並返回 Gemini CLI)
    - `!git status` (執行 `git status` 並返回 Gemini CLI)

- **`!` (切換 shell 模式)**
  - **說明：** 單獨輸入 `!` 可切換 shell 模式。
    - **進入 shell 模式：**
      - 啟用時，shell 模式會使用不同的顏色和「Shell 模式指示器」。
      - 在 shell 模式下，您輸入的文字會直接被解譯為 shell 指令。
    - **退出 shell 模式：**
      - 退出後，UI 會恢復其標準外觀，並恢復正常的 Gemini CLI ���為。

- **所有 `!` 用法的注意事項：** 您在 shell 模式下執行的指令具有與直接在終端機中執行相同的權限和影響。
