# IDE æ•´åˆ

Gemini CLI å¯ä»¥èˆ‡æ‚¨çš„ IDE æ•´åˆï¼Œæä¾›æ›´ç„¡ç¸«å’Œå…§å®¹æ„ŸçŸ¥çš„é«”é©—ã€‚æ­¤æ•´åˆå…è¨± CLI æ›´å¥½åœ°äº†è§£æ‚¨çš„å·¥ä½œå€ï¼Œä¸¦å•Ÿç”¨åŸç”Ÿç·¨è¼¯å™¨å·®ç•°æ¯”è¼ƒç­‰å¼·å¤§åŠŸèƒ½ã€‚

ç›®å‰ï¼Œå”¯ä¸€æ”¯æ´çš„ IDE æ˜¯ [Visual Studio Code](https://code.visualstudio.com/) å’Œå…¶ä»–æ”¯æ´ VS Code æ“´å……åŠŸèƒ½çš„ç·¨è¼¯å™¨ã€‚

## åŠŸèƒ½

- **å·¥ä½œå€å…§å®¹ï¼š** CLI è‡ªå‹•ç²å¾—æ‚¨å·¥ä½œå€çš„æ„ŸçŸ¥ï¼Œä»¥æä¾›æ›´ç›¸é—œå’Œæº–ç¢ºçš„å›æ‡‰ã€‚æ­¤å…§å®¹åŒ…æ‹¬ï¼š
  - æ‚¨å·¥ä½œå€ä¸­**æœ€è¿‘å­˜å–çš„ 10 å€‹æª”æ¡ˆ**ã€‚
  - æ‚¨çš„ä½œç”¨ä¸­æ¸¸æ¨™ä½ç½®ã€‚
  - æ‚¨é¸æ“‡çš„ä»»ä½•æ–‡å­—ï¼ˆæœ€å¤š 16KB é™åˆ¶ï¼›è¼ƒé•·çš„é¸æ“‡å°‡è¢«æˆªæ–·ï¼‰ã€‚

- **åŸç”Ÿå·®ç•°æ¯”è¼ƒï¼š** ç•¶ Gemini å»ºè­°ç¨‹å¼ç¢¼ä¿®æ”¹æ™‚ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨ IDE çš„åŸç”Ÿå·®ç•°æª¢è¦–å™¨ä¸­æŸ¥çœ‹è®Šæ›´ã€‚é€™è®“æ‚¨å¯ä»¥ç„¡ç¸«åœ°æª¢è¦–ã€ç·¨è¼¯ä¸¦æ¥å—æˆ–æ‹’çµ•å»ºè­°çš„è®Šæ›´ã€‚

- **VS Code æŒ‡ä»¤ï¼š** æ‚¨å¯ä»¥ç›´æ¥å¾ VS Code æŒ‡ä»¤é¸æ“‡å€ï¼ˆ`Cmd+Shift+P` æˆ– `Ctrl+Shift+P`ï¼‰å­˜å– Gemini CLI åŠŸèƒ½ï¼š
  - `Gemini CLI: Run`ï¼šåœ¨æ•´åˆçµ‚ç«¯æ©Ÿä¸­å•Ÿå‹•æ–°çš„ Gemini CLI å·¥ä½œéšæ®µã€‚
  - `Gemini CLI: Accept Diff`ï¼šæ¥å—ä½œç”¨ä¸­å·®ç•°ç·¨è¼¯å™¨ä¸­çš„è®Šæ›´ã€‚
  - `Gemini CLI: Close Diff Editor`ï¼šæ‹’çµ•è®Šæ›´ä¸¦é—œé–‰ä½œç”¨ä¸­çš„å·®ç•°ç·¨è¼¯å™¨ã€‚
  - `Gemini CLI: View Third-Party Notices`ï¼šé¡¯ç¤ºæ“´å……åŠŸèƒ½çš„ç¬¬ä¸‰æ–¹è²æ˜ã€‚

## å®‰è£èˆ‡è¨­å®š

æœ‰ä¸‰ç¨®æ–¹å¼å¯ä»¥è¨­å®š IDE æ•´åˆï¼š

### 1. è‡ªå‹•æç¤ºï¼ˆå»ºè­°ï¼‰

ç•¶æ‚¨åœ¨æ”¯æ´çš„ç·¨è¼¯å™¨ä¸­åŸ·è¡Œ Gemini CLI æ™‚ï¼Œå®ƒæœƒè‡ªå‹•åµæ¸¬æ‚¨çš„ç’°å¢ƒä¸¦æç¤ºæ‚¨é€£ç·šã€‚å›ç­”ã€Œæ˜¯ã€æœƒè‡ªå‹•åŸ·è¡Œå¿…è¦çš„è¨­å®šï¼ŒåŒ…æ‹¬å®‰è£é…å¥—æ“´å……åŠŸèƒ½ä¸¦å•Ÿç”¨é€£ç·šã€‚

### 2. å¾ CLI æ‰‹å‹•å®‰è£

å¦‚æœæ‚¨ä¹‹å‰å–æ¶ˆäº†æç¤ºæˆ–æƒ³è¦æ‰‹å‹•å®‰è£æ“´å……åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥åœ¨ Gemini CLI å…§åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```
/ide install
```

é€™æœƒæ‰¾åˆ°é©åˆæ‚¨ IDE çš„æ­£ç¢ºæ“´å……åŠŸèƒ½ä¸¦å®‰è£ã€‚

### 3. å¾å¸‚é›†æ‰‹å‹•å®‰è£

æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥å¾å¸‚é›†å®‰è£æ“´å……åŠŸèƒ½ã€‚

- **å°æ–¼ Visual Studio Codeï¼š** å¾ [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=google.gemini-cli-vscode-ide-companion) å®‰è£ã€‚
- **å°æ–¼ VS Code åˆ†æ”¯ç‰ˆæœ¬ï¼š** ç‚ºäº†æ”¯æ´ VS Code åˆ†æ”¯ç‰ˆæœ¬ï¼Œæ­¤æ“´å……åŠŸèƒ½ä¹Ÿç™¼ä½ˆåœ¨ [Open VSX Registry](https://open-vsx.org/extension/google/gemini-cli-vscode-ide-companion) ä¸Šã€‚è«‹éµå¾ªæ‚¨ç·¨è¼¯å™¨å¾æ­¤è¨»å†Šè¡¨å®‰è£æ“´å……åŠŸèƒ½çš„æŒ‡ç¤ºã€‚

> æ³¨æ„ï¼š
> "Gemini CLI Companion" æ“´å……åŠŸèƒ½å¯èƒ½æœƒå‡ºç¾åœ¨æœå°‹çµæœçš„åº•éƒ¨ã€‚å¦‚æœæ‚¨æ²’æœ‰ç«‹å³çœ‹åˆ°å®ƒï¼Œè«‹å˜—è©¦å‘ä¸‹æ»¾å‹•æˆ–æŒ‰ã€Œæ–°ç™¼ä½ˆã€æ’åºã€‚
>
> æ‰‹å‹•å®‰è£æ“´å……åŠŸèƒ½å¾Œï¼Œæ‚¨å¿…é ˆåœ¨ CLI ä¸­åŸ·è¡Œ `/ide enable` ä¾†å•Ÿç”¨æ•´åˆã€‚

## ä½¿ç”¨æ–¹å¼

### å•Ÿç”¨å’Œåœç”¨

æ‚¨å¯ä»¥å¾ CLI å…§æ§åˆ¶ IDE æ•´åˆï¼š

- è¦å•Ÿç”¨èˆ‡ IDE çš„é€£ç·šï¼Œè«‹åŸ·è¡Œï¼š
  ```
  /ide enable
  ```
- è¦åœç”¨é€£ç·šï¼Œè«‹åŸ·è¡Œï¼š
  ```
  /ide disable
  ```

å•Ÿç”¨æ™‚ï¼ŒGemini CLI æœƒè‡ªå‹•å˜—è©¦é€£ç·šåˆ° IDE é…å¥—æ“´å……åŠŸèƒ½ã€‚

### æª¢æŸ¥ç‹€æ…‹

è¦æª¢æŸ¥é€£ç·šç‹€æ…‹ä¸¦æŸ¥çœ‹ CLI å¾ IDE æ¥æ”¶åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œè«‹åŸ·è¡Œï¼š

```
/ide status
```

å¦‚æœå·²é€£ç·šï¼Œæ­¤æŒ‡ä»¤æœƒé¡¯ç¤ºå®ƒé€£ç·šçš„ IDE ä»¥åŠå®ƒçŸ¥é“çš„æœ€è¿‘é–‹å•Ÿæª”æ¡ˆæ¸…å–®ã€‚

ï¼ˆæ³¨æ„ï¼šæª”æ¡ˆæ¸…å–®é™åˆ¶ç‚ºå·¥ä½œå€å…§æœ€è¿‘å­˜å–çš„ 10 å€‹æª”æ¡ˆï¼Œä¸”åƒ…åŒ…å«ç£ç¢Ÿä¸Šçš„æœ¬æ©Ÿæª”æ¡ˆã€‚ï¼‰

### èˆ‡å·®ç•°æ¯”è¼ƒå·¥ä½œ

ç•¶æ‚¨è¦æ±‚ Gemini ä¿®æ”¹æª”æ¡ˆæ™‚ï¼Œå®ƒå¯ä»¥ç›´æ¥åœ¨æ‚¨çš„ç·¨è¼¯å™¨ä¸­é–‹å•Ÿå·®ç•°æª¢è¦–ã€‚

**è¦æ¥å—å·®ç•°æ¯”è¼ƒ**ï¼Œæ‚¨å¯ä»¥åŸ·è¡Œä»¥ä¸‹ä»»ä½•å‹•ä½œï¼š

- é»é¸å·®ç•°ç·¨è¼¯å™¨æ¨™é¡Œåˆ—ä¸­çš„**å‹¾é¸åœ–ç¤º**ã€‚
- å„²å­˜æª”æ¡ˆï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ `Cmd+S` æˆ– `Ctrl+S`ï¼‰ã€‚
- é–‹å•ŸæŒ‡ä»¤é¸æ“‡å€ä¸¦åŸ·è¡Œ **Gemini CLI: Accept Diff**ã€‚
- åœ¨ CLI æç¤ºæ™‚å›æ‡‰ `yes`ã€‚

**è¦æ‹’çµ•å·®ç•°æ¯”è¼ƒ**ï¼Œæ‚¨å¯ä»¥ï¼š

- é»é¸å·®ç•°ç·¨è¼¯å™¨æ¨™é¡Œåˆ—ä¸­çš„ **'x' åœ–ç¤º**ã€‚
- é—œé–‰å·®ç•°ç·¨è¼¯å™¨åˆ†é ã€‚
- é–‹å•ŸæŒ‡ä»¤é¸æ“‡å€ä¸¦åŸ·è¡Œ **Gemini CLI: Close Diff Editor**ã€‚
- åœ¨ CLI æç¤ºæ™‚å›æ‡‰ `no`ã€‚

æ‚¨ä¹Ÿå¯ä»¥åœ¨æ¥å—å»ºè­°è®Šæ›´å‰ï¼Œ**ç›´æ¥åœ¨å·®ç•°æª¢è¦–ä¸­ä¿®æ”¹å»ºè­°çš„è®Šæ›´**ã€‚

å¦‚æœæ‚¨åœ¨ CLI ä¸­é¸æ“‡ã€Œæ˜¯ï¼Œå§‹çµ‚å…è¨±ã€ï¼Œè®Šæ›´å°‡ä¸å†å‡ºç¾åœ¨ IDE ä¸­ï¼Œå› ç‚ºå®ƒå€‘æœƒè¢«è‡ªå‹•æ¥å—ã€‚

## èˆ‡æ²™ç®±åŒ–ä¸€èµ·ä½¿ç”¨

å¦‚æœæ‚¨åœ¨æ²™ç®±å…§ä½¿ç”¨ Gemini CLIï¼Œè«‹æ³¨æ„ä»¥ä¸‹äº‹é …ï¼š

- **On macOS:** The IDE integration requires network access to communicate with the IDE companion extension. You must use a Seatbelt profile that allows network access.
- **In a Docker Container:** If you run Gemini CLI inside a Docker (or Podman) container, the IDE integration can still connect to the VS Code extension running on your host machine. The CLI is configured to automatically find the IDE server on `host.docker.internal`. No special configuration is usually required, but you may need to ensure your Docker networking setup allows connections from the container to the host.

## Troubleshooting

If you encounter issues with IDE integration, here are some common error messages and how to resolve them.

### Connection Errors

- **Message:** `ğŸ”´ Disconnected: Failed to connect to IDE companion extension in [IDE Name]. Please ensure the extension is running. To install the extension, run /ide install.`
  - **Cause:** Gemini CLI could not find the necessary environment variables (`GEMINI_CLI_IDE_WORKSPACE_PATH` or `GEMINI_CLI_IDE_SERVER_PORT`) to connect to the IDE. This usually means the IDE companion extension is not running or did not initialize correctly.
  - **Solution:**
    1.  Make sure you have installed the **Gemini CLI Companion** extension in your IDE and that it is enabled.
    2.  Open a new terminal window in your IDE to ensure it picks up the correct environment.

- **Message:** `ğŸ”´ Disconnected: IDE connection error. The connection was lost unexpectedly. Please try reconnecting by running /ide enable`
  - **Cause:** The connection to the IDE companion was lost.
  - **Solution:** Run `/ide enable` to try and reconnect. If the issue continues, open a new terminal window or restart your IDE.

### Configuration Errors

- **Message:** `ğŸ”´ Disconnected: Directory mismatch. Gemini CLI is running in a different location than the open workspace in [IDE Name]. Please run the CLI from one of the following directories: [List of directories]`
  - **Cause:** The CLI's current working directory is outside the workspace you have open in your IDE.
  - **Solution:** `cd` into the same directory that is open in your IDE and restart the CLI.

- **Message:** `ğŸ”´ Disconnected: To use this feature, please open a workspace folder in [IDE Name] and try again.`
  - **Cause:** You have no workspace open in your IDE.
  - **Solution:** Open a workspace in your IDE and restart the CLI.

### General Errors

- **Message:** `IDE integration is not supported in your current environment. To use this feature, run Gemini CLI in one of these supported IDEs: [List of IDEs]`
  - **Cause:** You are running Gemini CLI in a terminal or environment that is not a supported IDE.
  - **Solution:** Run Gemini CLI from the integrated terminal of a supported IDE, like VS Code.

- **Message:** `No installer is available for IDE. Please install the Gemini CLI Companion extension manually from the marketplace.`
  - **Cause:** You ran `/ide install`, but the CLI does not have an automated installer for your specific IDE.
  - **Solution:** Open your IDE's extension marketplace, search for "Gemini CLI Companion", and [install it manually](#3-manual-installation-from-a-marketplace).
